"use client";

import React, { useEffect, useState } from "react";

interface FireIconProps {
    size?: number;
    color?: string; // Màu đơn
    style?: React.CSSProperties | any; // Nhận background linear-gradient từ style
    className?: string;
    isActive?: boolean; // Trạng thái active
}

const FireIcon: React.FC<FireIconProps> = ({
    size = 32,
    color = "currentColor",
    style = {},
    className = "",
    isActive = false, // Nhận từ prop để kiểm soát trạng thái
}) => {
    const [gradientStops, setGradientStops] = useState<string[]>([]);

    useEffect(() => {
        if (isActive && style.background && style.background.includes("linear-gradient")) {
            // Chỉ lấy màu gradient khi active
            const colorMatches = style.background.match(/#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})/g);
            if (colorMatches) {
                setGradientStops(colorMatches);
            }
        } else {
            // Khi mất active, reset gradient
            setGradientStops([]);
        }
    }, [isActive, style.background]);

    const useGradient = isActive && gradientStops.length > 1; // Chỉ dùng gradient nếu active

    return (
        // <svg
        //     viewBox="0 0 73 72"
        //     fill="none"
        //     xmlns="http://www.w3.org/2000/svg"
        //     className={className}
        //     width={size}
        //     height={size}
        // >
        //     {
        //         useGradient && (
        //             <defs>
        //                 <linearGradient id="customGradient" x1="0%" y1="0%" x2="100%" y2="0%">
        //                     {
        //                         gradientStops.map((color, index) => (
        //                             <stop
        //                                 key={index}
        //                                 offset={`${(index / (gradientStops.length - 1)) * 100}%`}
        //                                 stopColor={color}
        //                             />
        //                         ))
        //                     }
        //                 </linearGradient>
        //             </defs>
        //         )
        //     }
        //     <path
        //         opacity="0.2"
        //         d="M61.25 38.25V60.75H11.75V24.75L29.75 38.25V24.75L47.75 38.25H61.25Z"
        //         fill={useGradient ? "url(#customGradient)" : color}
        //     />
        //     <path
        //         d="M33.125 49.5C33.125 50.0967 32.8879 50.669 32.466 51.091C32.044 51.5129 31.4717 51.75 30.875 51.75H23C22.4033 51.75 21.831 51.5129 21.409 51.091C20.9871 50.669 20.75 50.0967 20.75 49.5C20.75 48.9033 20.9871 48.331 21.409 47.909C21.831 47.4871 22.4033 47.25 23 47.25H30.875C31.4717 47.25 32.044 47.4871 32.466 47.909C32.8879 48.331 33.125 48.9033 33.125 49.5ZM50 47.25H42.125C41.5283 47.25 40.956 47.4871 40.534 47.909C40.1121 48.331 39.875 48.9033 39.875 49.5C39.875 50.0967 40.1121 50.669 40.534 51.091C40.956 51.5129 41.5283 51.75 42.125 51.75H50C50.5967 51.75 51.169 51.5129 51.591 51.091C52.0129 50.669 52.25 50.0967 52.25 49.5C52.25 48.9033 52.0129 48.331 51.591 47.909C51.169 47.4871 50.5967 47.25 50 47.25ZM70.25 60.75C70.25 61.3467 70.0129 61.919 69.591 62.341C69.169 62.7629 68.5967 63 68 63H5C4.40326 63 3.83097 62.7629 3.40901 62.341C2.98705 61.919 2.75 61.3467 2.75 60.75C2.75 60.1533 2.98705 59.581 3.40901 59.159C3.83097 58.7371 4.40326 58.5 5 58.5H9.5V24.75C9.5 24.3321 9.61636 23.9226 9.83604 23.5671C10.0557 23.2117 10.37 22.9244 10.7438 22.7375C11.1175 22.5507 11.5359 22.4716 11.9521 22.5091C12.3682 22.5466 12.7657 22.6993 13.1 22.95L27.5 33.75V24.75C27.5 24.3321 27.6164 23.9226 27.836 23.5671C28.0557 23.2117 28.37 22.9244 28.7438 22.7375C29.1175 22.5507 29.5359 22.4716 29.9521 22.5091C30.3682 22.5466 30.7657 22.6993 31.1 22.95L41.9956 31.1203L45.2469 8.36437C45.4043 7.29381 45.9404 6.31518 46.7578 5.60614C47.5752 4.89709 48.6198 4.50463 49.7019 4.5H54.7981C55.8802 4.50463 56.9248 4.89709 57.7422 5.60614C58.5596 6.31518 59.0957 7.29381 59.2531 8.36437L63.4719 37.9322C63.4719 37.9322 63.4944 38.1516 63.4944 38.25V58.5H67.9944C68.2903 58.4993 68.5835 58.5569 68.8571 58.6697C69.1308 58.7824 69.3795 58.948 69.589 59.157C69.7985 59.366 69.9648 59.6143 70.0782 59.8877C70.1916 60.161 70.25 60.4541 70.25 60.75ZM46.1019 34.2L48.5009 36H58.6569L54.7981 9H49.7019L46.1019 34.2ZM14 58.5H59V40.5H47.75C47.2632 40.5 46.7895 40.3421 46.4 40.05L42.35 37.0125L32 29.25V38.25C32 38.6679 31.8836 39.0774 31.664 39.4329C31.4443 39.7883 31.13 40.0756 30.7562 40.2625C30.3825 40.4493 29.9641 40.5284 29.5479 40.4909C29.1318 40.4534 28.7343 40.3007 28.4 40.05L14 29.25V58.5Z"
        //         fill={useGradient ? "url(#customGradient)" : color}
        //     />
        // </svg>


        <svg
            viewBox="0 0 40 40"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            className={className}
            width={size}
            height={size}
        >
            <g clipPath="url(#clip0_3265_1997)">
                <path
                    d="M0 20C-3.9137e-08 22.6264 0.517315 25.2272 1.52241 27.6537C2.5275 30.0802 4.00069 32.285 5.85787 34.1421C7.71504 35.9993 9.91982 37.4725 12.3463 38.4776C14.7728 39.4827 17.3736 40 20 40C22.6264 40 25.2272 39.4827 27.6537 38.4776C30.0802 37.4725 32.285 35.9993 34.1421 34.1421C35.9993 32.285 37.4725 30.0802 38.4776 27.6537C39.4827 25.2272 40 22.6264 40 20C40 17.3736 39.4827 14.7728 38.4776 12.3463C37.4725 9.91982 35.9993 7.71504 34.1421 5.85786C32.285 4.00069 30.0802 2.5275 27.6537 1.52241C25.2272 0.517315 22.6264 0 20 0C17.3736 0 14.7728 0.517315 12.3463 1.52241C9.91982 2.5275 7.71504 4.00069 5.85787 5.85786C4.00069 7.71504 2.5275 9.91982 1.52241 12.3463C0.517315 14.7728 -3.9137e-08 17.3736 0 20Z"
                    fill="#FFF1DC"
                />
                <path
                    d="M33.9104 15.9965C33.6567 14.9493 32.6966 13.2083 31.7017 11.7756C31.264 11.1464 30.2939 11.3006 30.0651 12.0343C29.7069 13.1685 29.1374 14.4718 28.1474 15.6433C27.9659 15.8572 27.6127 15.7477 27.5953 15.4667C27.4063 12.5641 26.0308 5.06009 16.3306 4.00551C15.6615 3.93338 15.1392 4.58254 15.3581 5.21927C16.0893 7.35829 16.6763 11.4697 13.326 13.9893C13.1892 14.0912 13.0002 14.0564 12.8933 13.9246C11.7765 12.5019 10.3836 11.6289 8.49582 11.2757C7.83671 11.1538 7.28205 11.7532 7.43377 12.4074C7.72727 13.6684 7.84914 15.8199 6.64781 18.7498C4.63066 23.6621 2.3051 35.5262 20.8126 35.5262C39.3201 35.5262 34.266 17.4664 33.9104 15.9965ZM12.3038 29.2534C12.1626 29.3858 11.9968 29.489 11.8157 29.5571C11.6346 29.6253 11.4418 29.657 11.2484 29.6505C11.055 29.6441 10.8648 29.5995 10.6887 29.5194C10.5125 29.4393 10.3539 29.3253 10.222 29.1838C7.75711 26.5473 8.82911 21.63 8.95845 21.0779C9.14499 20.2869 9.93842 19.7945 10.7294 19.9835C10.9174 20.0277 11.0948 20.1085 11.2516 20.2213C11.4084 20.3341 11.5414 20.4767 11.643 20.6409C11.7446 20.8051 11.8129 20.9878 11.8439 21.1784C11.8749 21.3691 11.8681 21.5639 11.8237 21.7519C11.5899 22.7568 11.1895 25.9056 12.3709 27.1716C12.9281 27.766 12.8982 28.6988 12.3038 29.2534Z"
                    fill="#FC7032"
                />
                <path
                    d="M33.5969 15.0911C33.1715 14.0937 32.4453 12.8476 31.7016 11.7756C31.2638 11.1463 30.2938 11.3006 30.065 12.0343C29.7068 13.1685 29.1372 14.4718 28.1473 15.6433C27.9658 15.8572 27.6126 15.7477 27.5952 15.4667C27.4061 12.5641 26.0307 5.06009 16.3305 4.00551C15.6614 3.93338 15.1391 4.58254 15.358 5.21927C16.0892 7.35829 16.6762 11.4697 13.3259 13.9893C13.1891 14.0912 13.0001 14.0564 12.8931 13.9246C11.7764 12.5019 10.3835 11.6289 8.4957 11.2757C7.83658 11.1538 7.28193 11.7532 7.43365 12.4074C7.72714 13.6684 7.84901 15.8199 6.64768 18.7498C4.88672 23.0378 2.89445 32.6186 14.7188 34.989C25.0084 33.9717 33.1118 25.5275 33.5969 15.0911ZM12.3036 29.2534C12.1625 29.3858 11.9966 29.489 11.8155 29.5571C11.6344 29.6253 11.4417 29.657 11.2483 29.6505C11.0549 29.6441 10.8647 29.5995 10.6886 29.5194C10.5124 29.4393 10.3538 29.3253 10.2218 29.1838C7.75699 26.5473 8.82898 21.63 8.95832 21.0779C9.14486 20.2869 9.93829 19.7945 10.7292 19.9835C10.9172 20.0277 11.0947 20.1085 11.2515 20.2213C11.4082 20.3341 11.5412 20.4767 11.6429 20.6409C11.7445 20.8051 11.8128 20.9878 11.8438 21.1784C11.8748 21.3691 11.868 21.5639 11.8236 21.7519C11.5898 22.7568 11.1894 25.9056 12.3708 27.1716C12.9279 27.766 12.8981 28.6987 12.3036 29.2534Z"
                    fill="#FF7C33"
                />
                <path
                    d="M27.0675 12.4298C26.1049 9.06951 23.4834 4.78401 16.3276 4.00551C15.6585 3.93338 15.1362 4.58254 15.3551 5.21927C16.0863 7.35829 16.6733 11.4697 13.323 13.9893C13.1862 14.0912 12.9972 14.0564 12.8902 13.9246C11.7735 12.5019 10.3806 11.6289 8.4928 11.2757C7.83368 11.1538 7.27903 11.7532 7.43075 12.4074C7.72425 13.6684 7.84612 15.8199 6.64479 18.7498C5.76431 20.8938 4.82413 24.3635 5.58771 27.5944C6.02049 27.6218 6.45327 27.6392 6.89351 27.6392C7.66704 27.6392 8.42813 27.5944 9.17928 27.5123C8.1222 24.8634 8.85096 21.5305 8.95543 21.0804C9.14197 20.2894 9.9354 19.7969 10.7263 19.986C10.9143 20.0302 11.0918 20.111 11.2486 20.2238C11.4053 20.3366 11.5384 20.4792 11.64 20.6434C11.7416 20.8076 11.8099 20.9903 11.8409 21.1809C11.8719 21.3715 11.8651 21.5664 11.8207 21.7544C11.5994 22.707 11.2312 25.5847 12.1988 26.9577C19.3695 25.0898 25.0379 19.5283 27.0675 12.4298Z"
                    fill="#FF8D4D"
                />
                <path
                    d="M16.3275 4.00551C15.6584 3.93338 15.1361 4.58254 15.355 5.21927C16.0862 7.35829 16.6732 11.4697 13.3229 13.9893C13.1861 14.0912 12.9971 14.0564 12.8901 13.9246C11.7734 12.5019 10.3805 11.6289 8.4927 11.2757C7.83359 11.1538 7.27894 11.7532 7.43066 12.4074C7.72415 13.6684 7.84602 15.8199 6.64469 18.7498C6.51996 19.0572 6.4022 19.3673 6.2915 19.68C13.5691 18.0211 19.4092 12.5865 21.6303 5.54013C20.2225 4.79147 18.4814 4.23931 16.3275 4.00551Z" fill="#FFA56A" />
            </g>
            <defs>
                <clipPath id="clip0_3265_1997">
                    <rect width="40" height="40" fill="white" />
                </clipPath>
            </defs>
        </svg>

    );
};

export default FireIcon;
